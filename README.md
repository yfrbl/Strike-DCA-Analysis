# Strike DCA Analysis

Analyze Strike BTC DCA exports (two formats supported) and generate:
- Markdown report
- Monthly charts (PNG)
- Combined PDF (charts placed right after the title)

Outputs are written to a `Report/` subfolder next to the input file.

## Features
- Supports both Strike export formats:
  - **Legacy CSV** with `Date & Time (UTC)`
  - **Annual transactions CSV** with separate `Completed Date/Time (UTC)`
- Real purchases only: `Transaction Type = Purchase/Trade` **and** BTC amount present
- Quarterly average buy price
- Optional current price context (P/L)
- Charts + PDF generated by default
- **Language flag**: default English, `--de` for German

## Requirements
- Python 3.10+
- `pandoc` + a PDF engine (default: `xelatex`)
- `matplotlib` (for charts)

### macOS (Homebrew)
```bash
brew install pandoc
brew install --cask mactex   # for xelatex
brew install python-matplotlib
```

## Usage
### Analyze and generate report + charts + PDF (English default)
```bash
python3 analyze_strike.py examples/strike-2025-dummy.csv \
  --current-price-eur 65116.20 \
  --current-price-date 2026-02-01
```

### German output
```bash
python3 analyze_strike.py examples/strike-2025-dummy.csv --de
```

Outputs:
- `examples/Report/strike-2025-dummy-analysis.md`
- `examples/Report/strike-2025-dummy-charts.png`
- `examples/Report/strike-2025-dummy-analysis.pdf`

### Skip charts or PDF
```bash
python3 analyze_strike.py examples/strike-2025-dummy.csv --no-charts
python3 analyze_strike.py examples/strike-2025-dummy.csv --no-pdf
```

### Charts only
```bash
python3 strike_charts.py examples/strike-2025-dummy.csv --chart
```

### German charts only
```bash
python3 strike_charts.py examples/strike-2025-dummy.csv --chart --de
```

## Dummy data
This repo ships a synthetic example file:
- `examples/strike-2025-dummy.csv`

It contains **no real transaction data** and is safe to share.

## Notes
- EUR values are shown without decimals (rounded to whole euros).
- Month labels are abbreviated (e.g., `Jan.`).
- If `matplotlib` or `pandoc` is missing, the report still renders but charts/PDF are skipped with a warning.

## Project layout
```
strike_dca/           # core library
analyze_strike.py     # main CLI wrapper
strike_charts.py      # chart-only CLI wrapper
examples/             # dummy input + generated output
```
